<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<title> 监控平台模板 | Histograms </title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
	<meta name="description" content="">
	<meta name="author" content="">

	<link rel="stylesheet" type="text/css" href="css/cloud-admin.css" >
	<link rel="stylesheet" type="text/css"  href="css/themes/default.css" id="skin-switcher" >
	<link rel="stylesheet" type="text/css"  href="css/responsive.css" >

	<link href="font-awesome/css/font-awesome.min.css" rel="stylesheet">

	<!-- JQUERY UI-->
	<link rel="stylesheet" type="text/css" href="js/jquery-ui-1.10.3.custom/css/custom-theme/jquery-ui-1.10.3.custom.min.css" />
	<!-- DATE RANGE PICKER -->
	<link rel="stylesheet" type="text/css" href="js/bootstrap-daterangepicker/daterangepicker-bs3.css" />
	<!-- BOOTSTRAP SWITCH -->
	<link rel="stylesheet" type="text/css" href="js/bootstrap-switch/bootstrap-switch.min.css" />
	
	<!-- MAGIC SUGGEST -->
	<link rel="stylesheet" type="text/css" href="js/magic-suggest/magicsuggest-1.3.1-min.css" />
	<!-- DATE PICKER -->
	<link rel="stylesheet" type="text/css" href="js/datepicker/themes/default.min.css" />
	<link rel="stylesheet" type="text/css" href="js/datepicker/themes/default.date.min.css" />
	<link rel="stylesheet" type="text/css" href="js/datepicker/themes/default.time.min.css" />
	<!-- DATA PICKER ADD-->
	<link rel="stylesheet" type="text/css" href="jquey-ui-dpadd/jquery-ui-timepicker-addon.css" />
	<!-- XCHARTS -->
	<link rel="stylesheet" type="text/css" href="js/xcharts/xcharts.min.css" />
	<!-- COLOR PICKER -->
	<link rel="stylesheet" type="text/css" href="js/colorpicker/css/colorpicker.min.css" />
</head>
<body>
	<!-- HEADER -->
	<header class="navbar clearfix" id="header">
		<div class="container">
				<div class="navbar-brand">
					<!-- COMPANY LOGO -->
					<a href="counter.html">
						<img src="img/logo/logo.png" alt="Cloud Admin Logo" class="img-responsive" height="30" width="120">
					</a>
					<!-- /COMPANY LOGO -->
					<!-- TEAM STATUS FOR MOBILE -->
					<div class="visible-xs">
						<a href="#" class="team-status-toggle switcher btn dropdown-toggle">
							<i class="fa fa-users"></i>
						</a>
					</div>
					<!-- /TEAM STATUS FOR MOBILE -->
					<!-- SIDEBAR COLLAPSE -->
					<div id="sidebar-collapse" class="sidebar-collapse btn">
						<i class="fa fa-bars" 
							data-icon1="fa fa-bars" 
							data-icon2="fa fa-bars" ></i>
					</div>
					<!-- /SIDEBAR COLLAPSE -->
				</div>

		</div>
	</header>
	<!--/HEADER -->
	<!-- PAGE -->
	<section id="page">
				<!-- SIDEBAR -->
				<div id="sidebar" class="sidebar">
					<div class="sidebar-menu nav-collapse">
						<div class="divide-20"></div>

						<!-- SIDEBAR QUICK-LAUNCH -->
						<!-- <div id="quicklaunch">
						<!-- /SIDEBAR QUICK-LAUNCH -->
						
						<!-- SIDEBAR MENU -->
						<ul>
							<li>
								<a href="counter.html">
								<i class="fa fa-bar-chart-o fa-fw"></i> <span class="menu-text">Counter</span>
								<span class="selected"></span>
								</a>					
							</li>
							<li >
								<a href="gauges.html">
									<i class="fa fa-fw fa-calendar-o"></i> <span class="menu-text">Gauges</span>
									<span class="selected"></span>
								</a>
							</li>
							<li >
								<a href="meters.html">
									<i class="fa fa-sun-o fa-fw"></i> <span class="menu-text">Meters</span>
									<span class="selected"></span>
								</a>
							</li>
							<li >
								<a href="histograms.html">
									<i class="fa fa-columns fa-fw"></i> <span class="menu-text">Histograms</span>
									<span class="selected"></span>
								</a>
							</li>
							<li >
								<a href="timers.html">
									<i class="fa fa-rss fa-fw"></i> <span class="menu-text">Timers</span>
									<span class="selected"></span>
								</a>
							</li>
							<li class="active">
								<a href="healthchecks.html">
									<i class="fa fa-heart fa-fw"></i> <span class="menu-text">Health Checks</span>
									<span class="selected"></span>
								</a>
							</li>

						</ul>
						<!-- /SIDEBAR MENU -->
					</div>
				</div>
				<!-- /SIDEBAR -->
		<div id="main-content">
			<div class="container">
				<div class="row">
					<div id="content" class="col-lg-12">
						<!-- PAGE HEADER-->
						<div class="row">
							<div class="col-sm-12">
								<div class="page-header">
									<!-- STYLER -->
									
									<!-- /STYLER -->
									<!-- BREADCRUMBS -->
									<ul class="breadcrumb">
										<li>
											<i class="fa fa-home"></i>
											<a href="counter.html">Home</a>
										</li>
										<li>HealthChecks - 应用健康指标</li>
									</ul>
									<!-- /BREADCRUMBS -->
									<div class="clearfix">
										<h3 class="content-title pull-left">HealthChecks</h3>
									</div>
									<div class="description">包括功能：实时显示各服务的健康状况</div>
								</div>
							</div>
						</div>
						<!-- /PAGE HEADER -->

						<!-- SUMMARY -->
						<div class="row">
							<!-- WELLS -->
							<div class="col-md-9">
								<div class="box border blue">
									<div class="box-title">
										<h4>健康详情</h4>
									</div>
									<div class="box-body">
										<div id="app01" >
											<!--<div class="well "><h4>监控指标01</h4>
												<div class="alert alert-block alert-success fade in">
													<p><h4><i class="fa fa-heart"></i> 正常</h4>
													当前服务运行一切正常，无异常出现</p>
													<p>监控时间：2015-12-11 08:00:00</p>
												</div>
											</div>-->
										</div>
										<div id="app02" >
											<!--<div class="well well-lg ">
												<h4>监控指标02</h4>
												<div class="alert alert-block alert-danger fade in">
													<h4><i class="fa fa-times"></i> 异常</h4>
													<p>
														当前服务出现异常，报错日志为：数据库连接异常
													</p>
													<p>监控时间：2015-12-11 08:00:00</p>
												</div>
											</div>-->
										</div>
									</div>
								</div>
							</div>
							<!-- /WELLS -->
						</div>
						<!-- /SUMMARY -->

					</div><!-- /CONTENT-->
				</div>
			</div>
		</div>
	</section>
	<!--/PAGE -->
	<!-- JAVASCRIPTS -->
	<!-- Placed at the end of the document so the pages load faster -->

	<!-- JQUERY -->
	<script src="js/jquery/jquery-2.0.3.min.js"></script>
	<!-- JQUERY UI-->
	<script src="js/jquery-ui-1.10.3.custom/js/jquery-ui-1.10.3.custom.min.js"></script>
	<!-- BOOTSTRAP -->
	<script src="bootstrap-dist/js/bootstrap.min.js"></script>


	<!-- DATE RANGE PICKER -->
	<script src="js/bootstrap-daterangepicker/moment.min.js"></script>

	<script src="js/bootstrap-daterangepicker/daterangepicker.min.js"></script>
	<!-- SLIMSCROLL -->
	<script type="text/javascript" src="js/jQuery-slimScroll-1.3.0/jquery.slimscroll.min.js">
	</script>
	<script type="text/javascript" src="js/jQuery-slimScroll-1.3.0/slimScrollHorizontal.min.js"></script>
	<!-- BLOCK UI -->
	<script type="text/javascript" src="js/jQuery-BlockUI/jquery.blockUI.min.js"></script>
	<!-- D3 -->
	<script type="text/javascript" src="js/d3/d3.v3.min.js"></script>
	<!-- XCHARTS -->
	<script type="text/javascript" src="js/xcharts/xcharts.min.js"></script>
	<!-- DATE PICKER -->
	<script type="text/javascript" src="js/datepicker/picker.js"></script>
	<script type="text/javascript" src="js/datepicker/picker.date.js"></script>
	<script type="text/javascript" src="js/datepicker/picker.time.js"></script>
	<!-- DATE PICKER ADD -->
	<script type="text/javascript" src="jquey-ui-dpadd/jquery-ui-timepicker-addon.js"></script>
	<script type="text/javascript" src="jquey-ui-dpadd/jquery-ui-timepicker-zh-CN.js"></script>
	<!-- COOKIE -->
	<script type="text/javascript" src="js/jQuery-Cookie/jquery.cookie.min.js"></script>
	<!-- CUSTOM SCRIPT -->
	<script src="js/script.js"></script>
	<script>

		jQuery(document).ready(function() {

			App.init();

			setHealthData_1();
			setHealthData_2();

		});

		function setHealthData_1(){

			$.post("./healthchecks/findIsHealth.action", {
						appName:'tsdata',
						metricsKey:'database1'
					},
					function(returndata, status) {
						if ("success" == status) {
							var obj = eval(returndata);
							var checktime = obj.healthCheckTime;
							var ishealth = obj.isHealth;
							var mesaage = obj.healthCheckMessage;

							var htmlStr;
							if(ishealth=="1"){

								htmlStr = "<div class='well'><h4>database1</h4><div class='alert alert-block alert-success fade in'><p>" +
										"<h4><i class='fa fa-heart'></i>正常</h4>当前服务运行一切正常，无异常出现</p><p>监控时间："+checktime+"</p></div></div>";

							}else{

								htmlStr = "<div class='well well-lg '> <h4>database1</h4> " +
										"<div class='alert alert-block alert-danger fade in'> <h4><i class='fa fa-times'></i>" +
										" 异常</h4> <p>当前服务出现异常，报错日志为："+mesaage+" </p> <p>监控时间："+checktime+"</p> </div> </div>"

							}

							$("#app01").html(htmlStr);
						}
					});
			setTimeout(setHealthData_1,1000);
		}

		function setHealthData_2(){

			$.post("./healthchecks/findIsHealth.action", {
						appName:'tsdata',
						metricsKey:'database2'
					},
					function(returndata, status) {
						if ("success" == status) {
							var obj = eval(returndata);
							var checktime = obj.healthCheckTime;
							var ishealth = obj.isHealth;
							var mesaage = obj.healthCheckMessage;

							var htmlStr;
							if(ishealth=="1"){

								htmlStr = "<div class='well'><h4>database2</h4><div class='alert alert-block alert-success fade in'><p>" +
										"<h4><i class='fa fa-heart'></i>正常</h4>当前服务运行一切正常，无异常出现</p><p>监控时间："+checktime+"</p></div></div>";

							}else{

								htmlStr = "<div class='well well-lg '> <h4>database2</h4> " +
										"<div class='alert alert-block alert-danger fade in'> <h4><i class='fa fa-times'></i>" +
										" 异常</h4> <p>当前服务出现异常，报错日志为："+mesaage+" </p> <p>监控时间："+checktime+"</p> </div> </div>"

							}

							$("#app02").html(htmlStr);
						}
					});
			setTimeout(setHealthData_2,1000);
		}

	</script>


	<!-- /JAVASCRIPTS -->
</body>
</html>